---
title: 只涅：面试二度
author: nepire
avatar: /images/title.ico
authorLink: 'https://nepire.github.io/'
authorAbout: 逐梦者
authorDesc: 逐梦者
categories: 技术
comments: true
date: 2020-07-18 15:08:11
tags:
keywords:
description:
photos:
---
# 只涅：面试二度
争取到了第二次的面试机会，只能说比上次稍微成长了一些，但还是没能达到预期，记录下一些没能说清楚的东西

## 绕过CDN查找真实IP方法
验证可以通过多地ping域名和nslookup来判断目标是否存在cdn
### DNS历史解析记录
>https://dnsdb.io/zh-cn/
https://x.threatbook.cn/
http://toolbar.netcraft.com/site_report?url=
http://viewdns.info/
http://www.17ce.com/
https://community.riskiq.com/
http://www.crimeflare.com/cfssl.html
https://tools.ipip.net/cdn.php
https://securitytrails.com/
### 子域名反查
原因：可能因为成本或其他原因没有给每个域名套cdn
>https://x.threatbook.cn/
https://dnsdb.io/zh-cn/ #domain type:A
搜索引擎语法
子域名扫描器

### 网络空间引擎搜索法
> zoomeye,shodan，fofa
特征：
特有的http头部（如server类型、版本、cookie等信息)
特定keyword（如title、css、js、url等）
特定的IP段搜索（如fofa支持C段搜索）

### 证书查询
https://censys.io/
>语句
parsed.names: domain and tags.raw: trusted

### 目标文件信息泄漏
通过目标泄漏出来的信息里是否包含真实ip


### 目标主动连接
通过目标主机合法或着通过漏洞发起对自己的主机的请求就能不受cdn的影响获得ip


### 国外主机解析域名获取
针对国内cdn厂商大多只做了国内的线路，国外主机可能直接获得真实ip


### cdn本身
手段不限，获得目标网站管理员配置cdn的帐号，可通过配置直接获取



## shiro反序列化原理
原因
rememberMe的AES加密密钥硬编码于源码
已知密钥便可伪造可被正确解密的序列，使得反序列化的payload可控
方法
攻击者构造一个恶意的对象，并且对其序列化，AES加密，base64编码后，作为cookie的rememberMe字段发送，服务端对恶意对象进行反序列化引发命令执行
